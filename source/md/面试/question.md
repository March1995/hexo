1、讲讲hashMap的底层原理？

2、redis中的缓存击穿是怎么处理的？

3、InnoDB中的索引结构是什么样的？

4、讲讲聚集索引和非集聚索引的区别？

5、数据库sql优化处理是怎么处理的？

6、算法：找出一个字符串中第一次出现并只出现一次的字符下标？

7、算法：计算0-100内的素数之和

8、讲讲redis缓存击穿和缓存穿透分别有什么区别？

9、讲下springmvc中，用户从客户端发起一个请求是如何进入到你的controller里的？

10、讲一下spring中bean的注入过程？

11、讲一下redis的原子操作？

12、讲一下redis的hash操作？

13、讲一下redis基本数据类型？

14、讲一下平常用到的设计模式？

15、讲一下如何实现一个定时任务？

16、如果rabbitMq中消费者服务挂了，消息堆积高达几千万，你是怎么处理的？

先修复 consumer 的问题，确保其恢复消费速度，然后将现有 consumer 都停掉。

新建一个 topic，partition 是原来的 10 倍，临时建立好原先 10 倍的 queue 数量。

然后写一个临时的分发数据的 consumer 程序，这个程序部署上去消费积压的数据，消费之后不做耗时的处理，直接均匀轮询写入临时建立好的 10 倍数量的 queue。

接着临时征用 10 倍的机器来部署 consumer，每一批 consumer 消费一个临时 queue 的数据。这种做法相当于是临时将 queue 资源和 consumer 资源扩大 10 倍，以正常的 10 倍速度来消费数据。

等快速消费完积压数据之后，得恢复原先部署的架构，重新用原先的 consumer 机器来消费消息。

17、讲讲rabbitMq中订阅模式和消费者模式？

18、讲下你是如何保证幂等的？

使用数据库表的唯一键进行过滤，拒绝重复的请求。

使用消息表对请求进行滤重。

使用状态流转的方向来滤重，通过使用数据库的行级锁来实现。

根据业务特点，操作本身就是幂等性的，例如，删除一个资源，增加一个资源，获取一个资源等。

# 设计模式

1、用到哪些设计模式？怎么用的

2、单例模式的不同写法

 

# JDK

1、聊一下java的集合类

2、HashMap底层数据结构，以及解决hash碰撞的方法

3、Hashmap为什么要使用红黑树

红黑树相当于排序数据，可以自动的使用二分法进行定位，性能较高。
一般情况下，hash值做的比较好的话基本上用不到红黑树

4、集合类怎么解决高并发问题

5、队列的使用问题

6、自定义异常的应用场景

7、Object类中的方法

8、1.8的新特性

9、Java中的静态方法只有一个实例，如果想用多个实例怎么办？

10、Java面向对象的基本特征，继承、封装与多态

11、重写和重载是什么意思

12、怎样声明一个类不会被继承

13、HashMap中jdk1.7与jdk1.8的区别

14、concurrenthashMap 的底层实现原理，是如何实现线程安全的？

15、Java中的自增是线程安全的吗，如何实现线程安全的自增

16、Jdk1.8种的stream有用过吗，stream的并行操作原理，stream并行的线程池是从哪里来的

17、Jdk1.8的completableFuture有用过吗？

可见CompletableFuture的优点是：

异步任务结束时，会自动回调某个对象的方法；
异步任务出错时，会自动回调某个对象的方法；
主线程设置好回调后，不再关心异步任务的执行。

18、Java中的代理有几种实现方式

# JVM

1、jvm内存模型，以及这些空间的存放内容

2、堆内存划分的空间，如何回收这些内存对象，有哪些回收算法

3、jvm调优，如何解决线上gc问题

4、class初始化过程

5、内存溢出的原因，如何排查线上问题

6、jvm有哪些垃圾回收器，

7、类加载模型

双亲委派

8、JVM为什么要增加元空间？

动态加载的类过多，大小不可控。

9、堆G1垃圾收集器有了解么，有什么特点

# 多线程

1、多线程之间是如何通信的

2、synchronized底层实现，和lock的区别

3、synchronized关键字加在静态方法和实例方法的区别

4、countdownlatch的用法

5、线程池

 （1）Executor提供了几种线程池

 （2）线程池的参数

 （3）拒绝策略

 （4）任务放置的顺序过程

 （5）任务结束后会不会回收线程

     allowCoreThreadTimeOut手动设置为true或者执行的run方法抛出异常
     ThreadPoolExecutor回收工作线程，一条线程getTask()返回null，就会被回收。
    分两种场景。
    未调用shutdown() ，RUNNING状态下全部任务执行完成的场景
    线程数量大于corePoolSize，线程超时阻塞，超时唤醒后CAS减少工作线程数，如果CAS成功，返回null，线程回收。否则进入下一次循环。当工作者线程数量小于等于corePoolSize，就可以一直阻塞了。
    调用shutdown() ，全部任务执行完成的场景
    shutdown() 会向所有线程发出中断信号，这时有两种可能。
    2.1）所有线程都在阻塞
    中断唤醒，进入循环，都符合第一个if判断条件，都返回null，所有线程回收。
    2.2）任务还没有完全执行完
    至少会有一条线程被回收。在processWorkerExit(Worker w, boolean completedAbruptly)方法里会调用tryTerminate()，向任意空闲线程发出中断信号。所有被阻塞的线程，最终都会被一个个唤醒，回收。


 （6）未使用的线程池中的线程放在哪里

 （7）线程池线程存在哪

    worker

 （8）cache线程池会不会销毁核心线程
    
   

6、Java多线程的几种状态及线程各个状态之间是如何切换的

7、Java中的wait和sleep的区别与联系

8、如何在方法栈中进行数据传递？

9、ThreadLocal的底层实现形式及实现的数据结构？

10、Sychornized是否是公平锁

    非公平锁，可以重入

11、Sychronized和ReentryLock的区别

12、服务器CPU数量及线程池数量的关系

CPU 密集型任务(N+1)： 这种任务消耗的主要是 CPU 资源，可以将线程数设置为 N（CPU 核心数）+1，
比 CPU 核心数多出来的一个线程是为了防止线程偶发的缺页中断，或者其它原因导致的任务暂停而带来的影响。
一旦任务暂停，CPU 就会处于空闲状态，而在这种情况下多出来的一个线程就可以充分利用 CPU 的空闲时间。

I/O 密集型任务(2N)： 这种任务应用起来，系统会用大部分的时间来处理 I/O 交互，
而**线程**在处理 I/O 的时间段内不会占用 CPU 来处理，这时就可以将 CPU 交出给其它线程使用。
因此在 I/O 密集型任务的应用中，我们可以多配置一些线程，具体的计算方法是 2N。
因为io读数据或者缓存的时候，线程等待，此时如果多开线程，能有效提高cpu利用率

最佳线程数目 = （（线程等待时间+线程CPU时间）/线程CPU时间 ）* CPU数目

因为很显然，线程等待时间所占比例越高，需要越多线程。线程CPU时间所占比例越高，需要越少线程。

# mysql

1、Mysql的索引类型，底层索引数据结构，叶子节点存储的是什么，索引失效的原因

2、如何优化sql，查询计划的结果中看哪些些关键数据

3、innodb和myisam的区别

|  功 能 | MYISAM | InnoDB |
| :------: | :------: | :-------: |
| 存储限制 | 256TB | 64TB | 
| 支持事物 | 不支持 | 支持 | 
| 支持锁级别 | 表级锁 | 表级锁，行级锁 | 
| 支持外键 | 不支持 | 支持 | 
| 支持全文索引 | 支持 | 不支持 | 
| 支持数索引 | 支持 | 支持 | 
| 支持哈希索引 | 不支持 | 不支持 | 
| 支持数据缓存 | 不支持 | 支持 | 

4、mysql默认隔离级别，

Mysql 默认采用的 REPEATABLE_READ隔离级别

5、mysql的乐观锁和悲观锁，锁的种类

6、如何用sql实现乐观锁和悲观锁

7、mysql如何分库分表

8、MySQL为什么选择B+树作为它的存储结构，为什么不选择Hash、二叉、红黑树

9、Mysql数据库的事务与锁的理解

mysql InnoDB引擎通过MVVC实现提交读和可重复读这两种隔离级别MVVC+  Next-Key Locks锁实现 
解决幻读封锁类型：读写锁，意向锁，S,X 三级封锁协议

10、数据库临时表有没有用过，是怎么用的？

11、多数据源情况下如何进行事物的管理

12、Union和union all有什么区别 (如果允许重复的值，请使用 UNION ALL)

13、dateTime和timestamp有什么区别

14、mysql主从模式的实现

15、如何解析sql语句；即explain关键字的使用

16、Mysql的主从同步原理，mysql主从复制主要有几种模式

# Spring

1、spring的底层代码，

2、bean的生命周期

3、循环引用问题，以及spring中用到的设计模式

4、spring和springBoot的区别

5、spring的AOP的底层实现原理

6、spring的事务是如何回滚的

7、Spring 是如何解决循环依赖的问题的？

8、Spring IOC的理解，原理与实现

9、Bean Factory与FactoryBean有什么区别？@Bean这个注解时如何实现Bean的注入的？

# Mybatis

1、hibernate的区别

2、mybatis的缓存，都缓存些什么，session缓存存在哪

3、mybatis的执行流程，需要了解源码

4、mybatis如何防止sql注入

# redis

1、redis的数据结构类型，一般都用在什么场景下

> https://juejin.cn/post/6844904008591605767#heading-23

2、sortedSet的底层数据结构

所有元素长度小于64byte且元素数量小于128时，为ziplist另外则为跳表。

3、利用redis实现分布式锁

4、redis使用单线程的好处

操作都在内存中，避免了多线程的上下文切换导致的性能损耗。也存在不好的地方，keys指令，redis会卡顿。

5、redis中如何控制多线程并发

io多路复用。文件事件派发器。

redis分布式锁

6、redis删除key的策略

7、redis的主动缓存，被动缓存

8、如何保证数据一致性问题

9、集群环境下如何处理，解释一下一致性哈希

10、解释一下缓存击穿，缓存穿透，缓存雪崩，如何解决这些问题

11、排行榜功能的实现：使用redis的zset；zset的底层数据结构是什么样的；除了redis的zset还有什么其他的数据结构可以实现这个功能

12、Redis集群种类：主从模式、clust

