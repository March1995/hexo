---
title: 支付系统可能遇到的问题
date: 2021-10-11
desc:
keywords: token
categories: [active]
---
(资源)

资源不可用

资源响应超时

(外部服务)

通信中断

服务不可用

外部服务器响应超时

外部服务违背功能契约

应对方式(参考)：原则：避免发生，降低概率，控制影响，快速恢复。

|  故障条件   | 应对方式  |
|  ----  | ----  |
| 超量请求  | 配额控制，如订单号提前生成，控制额度 |
| 重复请求  | 幂等控制 |
| 并发请求  | 并发控制netty、mina等 |
| 请求积压  | 请求丢弃 |
| 服务/资源响应超时  | 时间控制 |
| 可恢复通信故障  | 合理重试 |
| 处理中断  | 事务/补偿机制 |
